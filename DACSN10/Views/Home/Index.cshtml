@model List<DACSN10.Models.Course>
@{
    ViewData["Title"] = "Trang chủ - OnlineLearning";

    // Calculate statistics
    int totalStudents = 0;
    int totalCourses = Model?.Count ?? 0;
    int totalLessons = 0;
    int publishedCount = 0;
    int closedCount = 0;

    if (Model != null)
    {
        foreach (var course in Model)
        {
            totalStudents += course.Enrollments?.Count ?? 0;
            totalLessons += course.Lessons?.Count ?? 0;

            if (course.TrangThai == "Published")
                publishedCount++;
            else
                closedCount++;
        }
    }
}
<!-- Hero Section -->
<section class="hero-section home-section">
    <div class="floating-elements">
        <i class="fas fa-graduation-cap floating-element" style="font-size: 3rem;"></i>
        <i class="fas fa-book floating-element" style="font-size: 2.5rem;"></i>
        <i class="fas fa-lightbulb floating-element" style="font-size: 2rem;"></i>
        <i class="fas fa-rocket floating-element" style="font-size: 2.5rem;"></i>
    </div>

    <div class="container-fluid px-4 px-md-5">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="hero-content animate__animated animate__fadeInLeft">
                    <h1 class="hero-title">
                        Creating a <span class="highlight">Better Future</span><br>
                        through Education
                    </h1>
                    <p class="hero-description">
                        Khám phá hàng ngàn khóa học chất lượng cao từ các chuyên gia hàng đầu.
                        Học mọi lúc, mọi nơi với OnlineLearning - nền tảng giáo dục trực tuyến số 1 Việt Nam.
                    </p>

                    <div class="d-flex gap-3 mb-4">
                        <a href="#courses" class="btn-primary-custom">
                            <i class="fas fa-play me-2"></i> Khám phá khóa học
                        </a>
                        <a href="#" class="btn-outline-custom">
                            <i class="fas fa-phone me-2"></i> Liên hệ
                        </a>
                    </div>

                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="totalStudents">@(Model?.Sum(c => c.Enrollments?.Count ?? 0) ?? 0)</div>
                            <div class="stat-label">Học viên</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="totalCourses">@(Model?.Count ?? 0)</div>
                            <div class="stat-label">Khóa học</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="totalLessons">@(Model?.Sum(c => c.Lessons?.Count ?? 0) ?? 0)</div>
                            <div class="stat-label">Bài học</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-image animate__animated animate__fadeInRight">
                    <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                         alt="Online Learning" class="img-fluid">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Search Section -->
<section class="search-section home-section" id="courses">
    <div class="container-fluid px-4 px-md-5">
        <div class="search-box">
            <div class="input-group">
                <input type="text" class="form-control search-input" placeholder="Tìm kiếm khóa học..." id="searchCourse">
                <button class="btn btn-primary-custom" type="button" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Courses Section -->
<section class="courses-section home-section">
    <div class="container-fluid px-4 px-md-5">
        <h2 class="section-title animate__animated animate__fadeInUp">
            <i class="fas fa-book-open me-3"></i>Danh sách khóa học
        </h2>
        <p class="section-subtitle animate__animated animate__fadeInUp">
            Khám phá các khóa học chất lượng, cập nhật liên tục từ các giảng viên hàng đầu
        </p>

        <div class="row" id="coursesContainer">
            @if (Model != null && Model.Any())
            {
                foreach (var course in Model)
                {
                    <div class="col-lg-4 col-md-6 course-item mb-4"
                         data-name="@course.TenKhoaHoc.ToLower()"
                         data-description="@(course.MoTa?.ToLower() ?? "")">
                        <div class="course-card animate__animated animate__fadeInUp">
                            <!-- Course Image Placeholder -->
                            <div class="course-image-placeholder">
                                <div class="text-center">
                                    <i class="fas fa-graduation-cap fa-3x mb-2"></i>
                                    <div style="font-size: 1rem;">@course.TenKhoaHoc</div>
                                </div>
                            </div>

                            <div class="course-card-body">
                                <h3 class="course-title">@course.TenKhoaHoc</h3>
                                <p class="course-description">
                                    @(string.IsNullOrEmpty(course.MoTa) ? "Chưa có mô tả cho khóa học này." : course.MoTa)
                                </p>

                                <!-- Course Stats -->
                                <div class="course-stats">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <small class="text-muted d-block">Học viên</small>
                                            <strong>@(course.Enrollments?.Count ?? 0)</strong>
                                        </div>
                                        <div class="col-4">
                                            <small class="text-muted d-block">Bài học</small>
                                            <strong>@(course.Lessons?.Count ?? 0)</strong>
                                        </div>
                                        <div class="col-4">
                                            <small class="text-muted d-block">Giá</small>
                                            <strong class="text-success">@course.Gia.ToString("N0")₫</strong>
                                        </div>
                                    </div>
                                </div>

                                <div class="course-meta">
                                    @if (course.TrangThai == "Published")
                                    {
                                        <span class="course-status status-published">
                                            <i class="fas fa-check-circle me-1"></i> Đang mở
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="course-status status-closed">
                                            <i class="fas fa-lock me-1"></i> Đã đóng
                                        </span>
                                    }
                                    <span class="course-date">
                                        <i class="fas fa-calendar me-1"></i> @course.NgayTao.ToString("dd/MM/yyyy")
                                    </span>
                                </div>

                                <div class="course-actions">
                                    <a href="@Url.Action("Details", "Course", new { id = course.CourseID })" class="btn-view">
                                        <i class="fas fa-eye me-1"></i> Xem chi tiết
                                    </a>

                                    @if (course.TrangThai == "Published")
                                    {
                                        @if (User.Identity.IsAuthenticated)
                                        {
                                            <button class="btn-enroll" onclick="enrollCourse(@course.CourseID, '@course.TenKhoaHoc')">
                                                <i class="fas fa-user-plus me-1"></i> Đăng ký
                                            </button>
                                            <button class="btn-favorite" onclick="addToFavorite(@course.CourseID, '@course.TenKhoaHoc')" title="Thêm vào yêu thích">
                                                <i class="far fa-heart"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <a href="/Identity/Account/Login" class="btn-enroll">
                                                <i class="fas fa-sign-in-alt me-1"></i> Đăng nhập
                                            </a>
                                        }
                                    }
                                    else
                                    {
                                        <button class="btn-enroll" disabled>
                                            <i class="fas fa-lock me-1"></i> Đã đóng
                                        </button>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <div class="text-center py-5">
                        <div class="mb-4">
                            <i class="fas fa-book-open fa-5x text-muted"></i>
                        </div>
                        <h3 class="text-muted mb-3">Chưa có khóa học nào</h3>
                        <p class="text-muted mb-4">Hiện tại chưa có khóa học nào được tạo. Hãy quay lại sau!</p>
                        <a href="@Url.Action("Index", "Course")" class="btn-primary-custom">
                            <i class="fas fa-search me-2"></i>Tìm khóa học khác
                        </a>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Chart Section -->
<section class="chart-section home-section">
    <div class="container-fluid px-4 px-md-5">
        <h3 class="text-center mb-4">Thống kê khóa học</h3>
        <div class="chart-container">
            <canvas id="courseChart"></canvas>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-dark text-light py-5">
    <div class="container-fluid px-4 px-md-5">
        <div class="row">
            <div class="col-lg-4 mb-4">
                <h5 class="mb-4">
                    <i class="fas fa-graduation-cap me-2"></i> OnlineLearning
                </h5>
                <p class="mb-3">Nền tảng học trực tuyến hàng đầu, mang đến kiến thức chất lượng cho mọi người.</p>
                <div class="d-flex">
                    <a href="#" class="me-3 text-light"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="me-3 text-light"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="me-3 text-light"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="text-light"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="col-lg-2 col-md-6 mb-4">
                <h5 class="mb-4">Khóa học</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">Lập trình</a></li>
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">Thiết kế</a></li>
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">Marketing</a></li>
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">Kinh doanh</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-6 mb-4">
                <h5 class="mb-4">Hỗ trợ</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">Trung tâm hỗ trợ</a></li>
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">FAQ</a></li>
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">Liên hệ</a></li>
                    <li class="mb-2"><a href="#" class="text-light text-decoration-none">Điều khoản</a></li>
                </ul>
            </div>
            <div class="col-lg-4">
                <h5 class="mb-4">Đăng ký nhận tin</h5>
                <p class="mb-3">Nhận thông tin về khóa học mới và ưu đãi đặc biệt</p>
                <div class="input-group">
                    <input type="email" class="form-control" placeholder="Email của bạn">
                    <button class="btn btn-primary" type="button">Đăng ký</button>
                </div>
            </div>
        </div>
        <hr class="my-4 bg-light opacity-25" />
        <div class="row">
            <div class="col-md-6 text-center text-md-start">
                <p class="mb-0">&copy; 2024 OnlineLearning. All rights reserved.</p>
            </div>
            <div class="col-md-6 text-center text-md-end">
                <a href="#" class="text-light text-decoration-none me-3">Chính sách bảo mật</a>
                <a href="#" class="text-light text-decoration-none">Điều khoản sử dụng</a>
            </div>
        </div>
    </div>
</footer>